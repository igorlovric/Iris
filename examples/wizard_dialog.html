<html>
    <head>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

        <link href="../src/iris.css" rel="stylesheet">
        <script src="../src/iris.js"></script>

        <script>
            function showModal() {
                let currentStep = 1;
                const totalSteps = 3;
                const wizardData = {};

                const dialog = new Iris();

                function renderStep(step) {
                    let content = '';

                    switch (step) {
                        case 1:
                            content = `
                                <h5>Step 1: Basic Information</h5>
                                <div class="mb-3">
                                    <label class="form-label">Name</label>
                                    <input type="text" class="form-control" id="name" value="${wizardData.name || ''}">
                                </div>
                            `;
                            break;
                        case 2:
                            content = `
                                <h5>Step 2: Contact</h5>
                                <div class="mb-3">
                                    <label class="form-label">Email</label>
                                    <input type="email" class="form-control" id="email" value="${wizardData.email || ''}">
                                </div>
                            `;
                            break;
                        case 3:
                            content = `
                                <h5>Step 3: Review</h5>
                                <dl class="row">
                                    <dt class="col-sm-3">Name:</dt>
                                    <dd class="col-sm-9">${wizardData.name}</dd>
                                    <dt class="col-sm-3">Email:</dt>
                                    <dd class="col-sm-9">${wizardData.email}</dd>
                                </dl>
                            `;
                            break;
                    }

                    dialog.setContent(content);
                    dialog.setTitle(`Wizard - Step ${step} of ${totalSteps}`);

                    // Update buttons
                    updateButtons();
                }

                function updateButtons() {
                    const footer = dialog.getModalFooter();
                    footer.innerHTML = '';

                    // Back button
                    if (currentStep > 1) {
                        const btnBack = document.createElement('button');
                        btnBack.className = 'btn btn-secondary';
                        btnBack.textContent = 'Back';
                        btnBack.onclick = () => {
                            currentStep--;
                            renderStep(currentStep);
                        };
                        footer.appendChild(btnBack);
                    }

                    // Next/Finish button
                    const btnNext = document.createElement('button');
                    btnNext.className = 'btn btn-primary';
                    btnNext.textContent = currentStep === totalSteps ? 'Finish' : 'Next';
                    btnNext.onclick = () => {
                        // Save current step data
                        if (currentStep === 1) {
                            wizardData.name = document.getElementById('name').value;
                        } else if (currentStep === 2) {
                            wizardData.email = document.getElementById('email').value;
                        }

                        if (currentStep === totalSteps) {
                            // Finish wizard
                            console.log('Wizard data:', wizardData);
                            dialog.close();
                        } else {
                            currentStep++;
                            renderStep(currentStep);
                        }
                    };
                    footer.appendChild(btnNext);
                }

                dialog.show({
                    title: 'Wizard',
                    message: '',
                    size: Iris.SIZE_LARGE,
                    type: Iris.TYPE_PRIMARY,
                    closeOnBackdrop: false,
                    buttons: []
                });

                renderStep(1);

            }

        </script>
    </head>

    <body>
        <button class="btn btn-primary" onclick="showModal();">Show modal</button>
    </body>
</html>