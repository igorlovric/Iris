/*!
 * Iris v1.1.1
 * Modern dialog manager for Bootstrap 5
 *
 * Homepage: https://github.com/igorlovric/iris
 * Demo: https://igorlovric.github.io/iris-examples
 *
 * Copyright (c) 2026 Igor Lovrić
 * Released under the MIT License
 */
class Iris{static info={name:"Iris",version:"1.1.1",date:"2025-02-15",author:"Igor Lovrić",license:"MIT"};static instances=[];static baseZIndex=1050;static currentLanguage="en-US";static i18n={"en-US":{code:"en-US",name:"English (United States)",translations:{loading:"Loading...",close:"Close",cancel:"Cancel",ok:"OK",yes:"Yes",no:"No",confirm:"Confirm",prompt:"Enter Value",delete:"Delete",save:"Save",error:"Error",warning:"Warning",success:"Success",info:"Information",loadError:"Error loading content: {0}",minimizedDialogs:"Minimized Dialogs",noMinimizedDialogs:"No minimized dialogs",confirmDelete:"Are you sure you want to delete this item?",confirmAction:"Are you sure you want to proceed?"}}};static SIZE_SMALL="modal-sm";static SIZE_NORMAL="";static SIZE_LARGE="modal-lg";static SIZE_XLARGE="modal-xl";static SIZE_FULLWIDTH="modal-fullwidth";static SIZE_FULLSCREEN="modal-fullscreen";static TYPE_DEFAULT="default";static TYPE_PRIMARY="primary";static TYPE_SUCCESS="success";static TYPE_INFO="info";static TYPE_WARNING="warning";static TYPE_DANGER="danger";static TYPE_DARK="dark";static taskbarPosition="bottom-right";static taskbarOffset=20;static taskbarZIndex=999999;static taskbarButtonColor="#6c757d";static taskbarMaxHeight=300;static taskbarButtonSize=60;static defaults={backdrop:!0,keyboard:!0,closeOnBackdrop:!0,draggable:!1,minimizable:!1,spinIcon:"spinner-border spinner-border-sm",size:Iris.SIZE_NORMAL,type:Iris.TYPE_DEFAULT};constructor(){this.modalElement=null,this.modalInstance=null,this.options={},this.zIndex=Iris.baseZIndex+10*Iris.instances.length,Iris.instances.push(this)}show(t){this.options={...Iris.defaults,...t},this.createModal(),this.options.onshow&&this.options.onshow(this);const e=!!this.options.closeOnBackdrop||"static";this.modalInstance=new bootstrap.Modal(this.modalElement,{backdrop:!1!==this.options.backdrop&&e,keyboard:this.options.keyboard}),this.options.draggable&&this.makeDraggable(),this.options.ajaxUrl&&this.loadContent(this.options.ajaxUrl),this.modalElement.addEventListener("shown.bs.modal",()=>{this.options.onshown&&this.options.onshown(this)}),this.modalElement.addEventListener("hide.bs.modal",t=>{if(this.options.onhide&&!1===this.options.onhide(this))return t.preventDefault(),!1}),this.modalElement.addEventListener("hidden.bs.modal",()=>{this.options.onhidden&&this.options.onhidden(this),this.destroy()}),this.setZIndex(),this.modalInstance.show()}createModal(){const t="irisModal_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),e=this.options.minimizable?'<button type="button" class="btn-minimize" aria-label="Minimize"><span style="font-weight: 1000 !important;">&lowbar;</span></button>':"",s=this.getCloseBtnClass(),i=!1!==this.options.closeButton?`<button type="button" class="btn-close ${s}" data-bs-dismiss="modal" aria-label="${Iris.t("close")}"></button>`:"",n=this.getHeaderClass(),o=this.getHeaderTextClass(),a=`\n            <div class="modal fade" id="${t}" tabindex="-1" aria-hidden="true">\n                <div ${this.options.id?`id="${this.options.id}"`:""} class="modal-dialog ${this.options.size} ${this.options.centered?"modal-dialog-centered":""} ${this.options.scrollable?"modal-dialog-scrollable":""}">\n                    <div class="modal-content">\n                        ${this.options.title?`\n                        <div class="modal-header ${n}">\n                            <h5 class="modal-title ${o}">${this.options.title}</h5>\n                            <div class="modal-header-buttons">\n                                ${e}\n                                ${i}\n                            </div>\n                        </div>`:""}\n                        <div class="modal-body">\n                            ${this.options.message||`<div class="text-center"><div class="spinner-border" role="status"><span class="visually-hidden">${Iris.t("loading")}</span></div></div>`}\n                        </div>\n                        ${this.options.buttons?`\n                        <div class="modal-footer">\n                            ${this.renderButtons()}\n                        </div>`:""}\n                    </div>\n                </div>\n            </div>\n        `;if(document.body.insertAdjacentHTML("beforeend",a),this.modalElement=document.getElementById(t),this.options.minimizable){const t=this.modalElement.querySelector(".btn-minimize");t&&t.addEventListener("click",()=>this.minimize())}}getHeaderClass(){return{default:"",primary:"bg-primary",success:"bg-success",info:"bg-info",warning:"bg-warning",danger:"bg-danger",dark:"bg-dark"}[this.options.type]||""}getHeaderTextClass(){return"default"===this.options.type?"":["warning"].includes(this.options.type)?"text-dark":"text-white"}getCloseBtnClass(){return["default","warning"].includes(this.options.type)?"":"btn-close-white"}renderButtons(){return this.options.buttons&&0!==this.options.buttons.length?this.options.buttons.map((t,e)=>{const s=t.id?t.id:"btn_"+Math.random().toString(36).substr(2,9),i=t.icon?`<i class="${t.icon}"></i> `:"";return this._buttonRefs=this._buttonRefs||[],this._buttonRefs[e]={id:s,config:t},setTimeout(()=>{const i=document.getElementById(s);i&&(i._originalHTML=i.innerHTML,i._isSpinning=!1,i.addEventListener("click",s=>{if(t.action){t.autoSpin&&this.buttonSpin(e,!0);const i=t.action(this,s);!1!==i&&!1!==t.autoClose&&t.autoSpin&&this.buttonSpin(e,!1),!1!==i&&!1!==t.autoClose&&this.close()}else!1!==t.autoClose&&this.close()}))},100),`<button type="button" id="${s}" class="btn ${t.cssClass||"btn-secondary"}" ${t.disabled?"disabled":""}>${i}${t.label}</button>`}).join(""):""}loadContent(t,e={}){const s=new URLSearchParams(e).toString();fetch(s?`${t}?${s}`:t).then(t=>{if(!t.ok)throw new Error("Network response was not ok");return t.text()}).then(t=>{this.getModalBody().innerHTML=t,this.options.onContentLoaded&&this.options.onContentLoaded(this)}).catch(t=>{this.getModalBody().innerHTML=`<div class="alert alert-danger">${Iris.t("loadError",t.message)}</div>`})}setZIndex(){this.modalElement.style.zIndex=this.zIndex,setTimeout(()=>{const t=document.querySelectorAll(".modal-backdrop");t.length>0&&(t[t.length-1].style.zIndex=this.zIndex-1)},50)}makeDraggable(){const t=this.modalElement.querySelector(".modal-header"),e=this.modalElement.querySelector(".modal-dialog");if(!t)return;let s=!1,i=!1,n=0,o=0,a=0,l=0,r=0,d=0;t.style.cursor="move",t.style.userSelect="none";const dragStart=t=>{const n=e.getBoundingClientRect();"mousedown"===t.type?(a=t.clientX-n.left,l=t.clientY-n.top,r=t.clientX,d=t.clientY):"touchstart"===t.type&&(a=t.touches[0].clientX-n.left,l=t.touches[0].clientY-n.top,r=t.touches[0].clientX,d=t.touches[0].clientY),s=!0,i=!1},drag=t=>{if(!s)return;let c,h;"mousemove"===t.type?(c=t.clientX,h=t.clientY):"touchmove"===t.type&&(c=t.touches[0].clientX,h=t.touches[0].clientY);const m=Math.abs(c-r),u=Math.abs(h-d);if(!i&&(m>5||u>5)){i=!0;const t=e.getBoundingClientRect(),s=e.offsetWidth;e.style.position="fixed",e.style.margin="0",e.style.width=s+"px",e.style.left=t.left+"px",e.style.top=t.top+"px",e.style.transform="none"}if(!i)return;t.preventDefault(),n=c-a,o=h-l;const b=window.innerWidth-e.offsetWidth,p=window.innerHeight-e.offsetHeight;n=Math.max(0,Math.min(n,b)),o=Math.max(0,Math.min(o,p)),e.style.left=n+"px",e.style.top=o+"px"},dragEnd=()=>{s=!1,i=!1};t.addEventListener("mousedown",dragStart),t.addEventListener("touchstart",dragStart),document.addEventListener("mousemove",drag),document.addEventListener("touchmove",drag),document.addEventListener("mouseup",dragEnd),document.addEventListener("touchend",dragEnd)}close(t=!1){t?this.modalInstance&&(this.modalElement.removeEventListener("hide.bs.modal",()=>{}),this.modalInstance.hide()):this.modalInstance&&this.modalInstance.hide()}destroy(){this._isMinimized&&IrisTaskbar.remove(this),this.modalElement&&this.modalElement.remove();const t=Iris.instances.indexOf(this);t>-1&&Iris.instances.splice(t,1),0===Iris.instances.length&&(document.body.classList.remove("modal-open"),document.body.style.overflow="",document.body.style.paddingRight="")}getModalBody(){return this.modalElement.querySelector(".modal-body")}getModalFooter(){return this.modalElement.querySelector(".modal-footer")}getModalHeader(){return this.modalElement.querySelector(".modal-header")}getButton(t){const e=this.getModalFooter();if(!e)return;let s=null;if("number"==typeof t)s=e.querySelectorAll("button")[t];else if("string"==typeof t){const i=t.startsWith("#")?t.slice(1):t;if(s=e.querySelector(`#${i}`),!s){const i=e.querySelectorAll("button");s=Array.from(i).find(e=>e.textContent.trim()===t)}}return s}setTitle(t){const e=this.modalElement.querySelector(".modal-title");e&&(e.innerHTML=t)}setContent(t){this.getModalBody().innerHTML=t}setType(t){const e=this.getModalHeader();if(e){e.classList.remove("bg-primary","bg-success","bg-info","bg-warning","bg-danger","bg-dark");const s=e.querySelector(".modal-title");s&&s.classList.remove("text-white","text-dark");const i=e.querySelector(".btn-close");this.options.type=t;const n=this.getHeaderClass(),o=this.getHeaderTextClass(),a=this.getCloseBtnClass();n&&e.classList.add(n),s&&o&&s.classList.add(...o.split(" ")),i&&(i.classList.remove("btn-close-white"),a&&i.classList.add(a))}}enableButton(t){const e=this.getModalFooter();if(!e)return;let s=null;if("number"==typeof t)s=e.querySelectorAll("button")[t];else if("string"==typeof t){const i=t.startsWith("#")?t.slice(1):t;if(s=e.querySelector(`#${i}`),!s){const i=e.querySelectorAll("button");s=Array.from(i).find(e=>e.textContent.trim()===t)}}s&&(s.disabled=!1)}disableButton(t){const e=this.getModalFooter();if(!e)return;let s=null;if("number"==typeof t)s=e.querySelectorAll("button")[t];else if("string"==typeof t){const i=t.startsWith("#")?t.slice(1):t;if(s=e.querySelector(`#${i}`),!s){const i=e.querySelectorAll("button");s=Array.from(i).find(e=>e.textContent.trim()===t)}}s&&(s.disabled=!0)}enableButtons(t){const e=this.getModalFooter();e&&e.querySelectorAll("button").forEach(e=>{e.disabled=!t})}buttonSpin(t,e){const s=this.getModalFooter();if(!s)return;let i=null;if("number"==typeof t)i=s.querySelectorAll("button")[t];else if("string"==typeof t){const e=t.startsWith("#")?t.slice(1):t;if(i=s.querySelector(`#${e}`),!i){const e=s.querySelectorAll("button");i=Array.from(e).find(e=>e.textContent.trim()===t)}}if(i)if(i._originalHTML||(i._originalHTML=i.innerHTML,i._isSpinning=!1),e){if(!i._isSpinning){i._isSpinning=!0,i.disabled=!0;const t=`<span class="${this.options.spinIcon||"spinner-border spinner-border-sm"}" role="status" aria-hidden="true"></span>`,e=i.querySelector("i, svg, .icon");e?(i._originalIcon=e.outerHTML,e.outerHTML=t):i.innerHTML=`${t} ${i.textContent.trim()}`}}else i._isSpinning&&(i._isSpinning=!1,i.disabled=!1,i.innerHTML=i._originalHTML)}buttonSpinAll(t){const e=this.getModalFooter();e&&e.querySelectorAll("button").forEach((e,s)=>{this.buttonSpin(s,t)})}setClosable(t){if(this.modalInstance)if(t||void 0!==this._originalClosableState||(this._originalClosableState={backdrop:this.options.backdrop,closeOnBackdrop:this.options.closeOnBackdrop,keyboard:this.options.keyboard,closeButton:this.options.closeButton}),t){if(this._originalClosableState){this.options.closeOnBackdrop=this._originalClosableState.closeOnBackdrop,this.options.keyboard=this._originalClosableState.keyboard,this.options.closeButton=this._originalClosableState.closeButton;const t=!!this._originalClosableState.closeOnBackdrop||"static";if(this.modalInstance._config.backdrop=!1!==this._originalClosableState.backdrop&&t,this.modalInstance._config.keyboard=this._originalClosableState.keyboard,this._originalClosableState.closeButton){const t=this.modalElement.querySelector(".btn-close");t&&(t.style.display="")}delete this._originalClosableState}}else{this.options.closeOnBackdrop=!1,this.options.keyboard=!1,this.options.closeButton=!1,this.modalInstance._config.backdrop="static",this.modalInstance._config.keyboard=!1;const t=this.modalElement.querySelector(".btn-close");t&&(t.style.display="none")}}static t(t,...e){const s=Iris.currentLanguage;let i=(Iris.i18n[s]?.translations||Iris.i18n["en-US"]?.translations||{})[t]||t;return e.forEach((t,e)=>{i=i.replace(`{${e}}`,t)}),i}static setLanguage(t){return!!Iris.i18n[t]&&(Iris.currentLanguage=t,!0)}static getAvailableLanguages(){return Object.keys(Iris.i18n).map(t=>({code:t,name:Iris.i18n[t].name}))}static show(t){const e=new Iris;return e.show(t),e}minimize(){if(!this.options.minimizable)return;if(this._isMinimized)return;const t=document.querySelectorAll(".modal.show");if(Array.from(t).indexOf(this.modalElement)<t.length-1)return;if(this._minimizedState={scrollTop:this.getModalBody().scrollTop,wasVisible:this.modalElement.classList.contains("show")},this.options.draggable){const t=this.modalElement.querySelector(".modal-dialog");this._minimizedState.position={left:t.style.left,top:t.style.top,transform:t.style.transform}}this.modalElement.classList.remove("show"),this.modalElement.style.display="none",this.modalElement.setAttribute("aria-hidden","true");let e=this.modalElement.nextElementSibling;for(;e&&!e.classList.contains("modal-backdrop");)e=e.nextElementSibling;this._minimizedState.backdrop=e,e&&(e.classList.remove("show"),setTimeout(()=>{e&&this._isMinimized&&(e.style.display="none")},150));const s=document.querySelectorAll(".modal.show"),i=IrisTaskbar.minimizedDialogs.length>0;0!==s.length||i||(document.body.classList.remove("modal-open"),document.body.style.overflow="",document.body.style.paddingRight=""),this._isMinimized=!0,IrisTaskbar.add(this),this.options.onminimize&&this.options.onminimize(this)}restore(){if(!this._isMinimized)return;IrisTaskbar.remove(this),this.modalElement.style.display="block",this.modalElement.classList.add("show"),this.modalElement.setAttribute("aria-hidden","false");let t=this._minimizedState?.backdrop;if(t?(t.style.display="",setTimeout(()=>{t.classList.add("show")},10)):(t=document.createElement("div"),t.className="modal-backdrop fade",this.modalElement.parentNode.insertBefore(t,this.modalElement.nextSibling),setTimeout(()=>{t.classList.add("show")},10)),t.style.zIndex=this.zIndex-1,document.body.classList.add("modal-open"),this.modalElement.style.zIndex=this.zIndex,this._isMinimized=!1,this._minimizedState){if(this.getModalBody().scrollTop=this._minimizedState.scrollTop,this.options.draggable&&this._minimizedState.position){const t=this.modalElement.querySelector(".modal-dialog");t.style.left=this._minimizedState.position.left,t.style.top=this._minimizedState.position.top,t.style.transform=this._minimizedState.position.transform}delete this._minimizedState}this.options.onrestore&&this.options.onrestore(this)}isMinimized(){return!0===this._isMinimized}static alert(t,e=Iris.t("info"),s={}){return Iris.show({title:e,message:t,type:Iris.TYPE_INFO,buttons:[{label:Iris.t("ok"),cssClass:"btn-primary",autoClose:!0}],...s})}static confirm(t,e=Iris.t("confirm"),s={}){return new Promise(i=>{Iris.show({title:e,message:t,type:Iris.TYPE_WARNING,buttons:[{label:Iris.t("no"),cssClass:"btn-secondary",action:()=>i(!1)},{label:Iris.t("yes"),cssClass:"btn-primary",action:()=>i(!0)}],...s})})}static prompt(t,e=Iris.t("prompt"),s="",i={}){return new Promise(n=>{const o="prompt_"+Math.random().toString(36).substr(2,9);Iris.show({title:e,message:`\n                    <p>${t}</p>\n                    <input type="text" id="${o}" class="form-control" value="${s}">\n                `,type:Iris.TYPE_INFO,buttons:[{label:Iris.t("cancel"),cssClass:"btn-secondary",action:()=>n(null)},{label:Iris.t("ok"),cssClass:"btn-primary",action:t=>{const e=document.getElementById(o);n(e?e.value:null)}}],onshown:t=>{const e=document.getElementById(o);e&&(e.focus(),e.select())},...i})})}static success(t,e=Iris.t("success"),s={}){return Iris.show({title:e,message:t,type:Iris.TYPE_SUCCESS,buttons:[{label:Iris.t("ok"),cssClass:"btn-success",autoClose:!0}],...s})}static error(t,e=Iris.t("error"),s={}){return Iris.show({title:e,message:t,type:Iris.TYPE_DANGER,buttons:[{label:Iris.t("ok"),cssClass:"btn-danger",autoClose:!0}],...s})}static warning(t,e=Iris.t("warning"),s={}){return Iris.show({title:e,message:t,type:Iris.TYPE_WARNING,buttons:[{label:Iris.t("ok"),cssClass:"btn-warning",autoClose:!0}],...s})}}class IrisTaskbar{static minimizedDialogs=[];static taskbarElement=null;static listElement=null;static isListVisible=!1;static init(){this.taskbarElement||this.create()}static create(){this.taskbarElement=document.createElement("div"),this.taskbarElement.id="irisTaskbar",this.taskbarElement.style.display="none",this.taskbarElement.style.zIndex=Iris.taskbarZIndex,this.setPosition();const t=document.createElement("button");t.id="irisTaskbarButton",t.style.backgroundColor=Iris.taskbarButtonColor,t.innerHTML='\n            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                <rect x="3" y="3" width="7" height="7" rx="1"/>\n                <rect x="14" y="3" width="7" height="7" rx="1"/>\n                <rect x="14" y="14" width="7" height="7" rx="1"/>\n                <rect x="3" y="14" width="7" height="7" rx="1"/>\n            </svg>\n            <span class="iris-taskbar-badge" style="display: none;">0</span>\n        ',t.addEventListener("click",()=>this.toggle()),this.taskbarElement.appendChild(t),document.body.appendChild(this.taskbarElement)}static setPosition(){if(!this.taskbarElement)return;const t=Iris.taskbarOffset+"px",e=Iris.taskbarZIndex;switch(this.taskbarElement.style.zIndex=e,this.taskbarElement.style.top="auto",this.taskbarElement.style.bottom="auto",this.taskbarElement.style.left="auto",this.taskbarElement.style.right="auto",Iris.taskbarPosition){case"bottom-right":this.taskbarElement.style.bottom=t,this.taskbarElement.style.right=t;break;case"bottom-left":this.taskbarElement.style.bottom=t,this.taskbarElement.style.left=t;break;case"top-right":this.taskbarElement.style.top=t,this.taskbarElement.style.right=t;break;case"top-left":this.taskbarElement.style.top=t,this.taskbarElement.style.left=t}}static add(t){this.init(),this.minimizedDialogs.includes(t)||(this.minimizedDialogs.push(t),this.updateBadge(),this.show())}static remove(t){const e=this.minimizedDialogs.indexOf(t);e>-1&&(this.minimizedDialogs.splice(e,1),this.updateBadge(),0===this.minimizedDialogs.length?(this.hide(),this.hideList()):this.updateList())}static updateBadge(){if(!this.taskbarElement)return;const t=this.taskbarElement.querySelector(".iris-taskbar-badge");t&&(t.textContent=this.minimizedDialogs.length,t.style.display=this.minimizedDialogs.length>0?"flex":"none")}static show(){this.taskbarElement&&(this.taskbarElement.style.display="block")}static hide(){this.taskbarElement&&(this.taskbarElement.style.display="none")}static toggle(){this.isListVisible?this.hideList():this.showList()}static showList(){this.listElement||this.createList(),this.updateList(),this.listElement.style.display="block",this.isListVisible=!0,setTimeout(()=>{document.addEventListener("click",this._outsideClickHandler=t=>{this.taskbarElement.contains(t.target)||this.hideList()})},0)}static hideList(){this.listElement&&(this.listElement.style.display="none"),this.isListVisible=!1,this._outsideClickHandler&&(document.removeEventListener("click",this._outsideClickHandler),this._outsideClickHandler=null)}static createList(){this.listElement=document.createElement("div"),this.listElement.className="iris-taskbar-list",this.listElement.style.maxHeight=Iris.taskbarMaxHeight+"px",this.positionList(),this.taskbarElement.appendChild(this.listElement)}static positionList(){if(!this.listElement)return;const t=Iris.taskbarButtonSize;switch(Iris.taskbarPosition){case"bottom-right":this.listElement.style.bottom=t+10+"px",this.listElement.style.right="0";break;case"bottom-left":this.listElement.style.bottom=t+10+"px",this.listElement.style.left="0";break;case"top-right":this.listElement.style.top=t+10+"px",this.listElement.style.right="0";break;case"top-left":this.listElement.style.top=t+10+"px",this.listElement.style.left="0"}}static updateList(){if(!this.listElement)return;if(0===this.minimizedDialogs.length)return void(this.listElement.innerHTML=`<div class="iris-taskbar-empty">${Iris.t("noMinimizedDialogs")}</div>`);let t=`<div class="iris-taskbar-header"><h6>${Iris.t("minimizedDialogs")}</h6></div>`;this.minimizedDialogs.forEach((e,s)=>{const i=e.options.title||"Untitled",n=this.getTypeIcon(e.options.type);t+=`\n                <div class="iris-taskbar-item" data-index="${s}">\n                    <div class="iris-taskbar-item-icon">${n}</div>\n                    <div class="iris-taskbar-item-content">\n                        <p class="iris-taskbar-item-title">${i}</p>\n                    </div>\n                    <button class="iris-taskbar-item-close" data-index="${s}" data-action="close">&times;</button>\n                </div>\n            `}),this.listElement.innerHTML=t,this.listElement.querySelectorAll(".iris-taskbar-item").forEach(t=>{t.addEventListener("click",e=>{if(e.target.closest(".iris-taskbar-item-close"))return;const s=parseInt(t.dataset.index),i=this.minimizedDialogs[s];i&&(i.restore(),this.hideList())})}),this.listElement.querySelectorAll(".iris-taskbar-item-close").forEach(t=>{t.addEventListener("click",e=>{e.stopPropagation();const s=parseInt(t.dataset.index),i=this.minimizedDialogs[s];i&&i.close(!0)})})}static getTypeIcon(t){const e={primary:"#0d6efd",success:"#198754",info:"#0dcaf0",warning:"#ffc107",danger:"#dc3545",dark:"#212529",default:"#6c757d"};return`\n        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">\n            <rect x="2" y="2" width="12" height="12" rx="2" stroke="${e[t]||e.default}" stroke-width="2" fill="none"/>\n        </svg>\n        `}static destroy(){this.taskbarElement&&(this.taskbarElement.remove(),this.taskbarElement=null,this.listElement=null),this.minimizedDialogs=[],this.isListVisible=!1}}
//# sourceMappingURL=iris.min.js.map